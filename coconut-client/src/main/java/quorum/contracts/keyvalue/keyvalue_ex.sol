contract keyvalue {

    event keyValueEvent(string eventType, string signature);

    mapping(string => string) kv;

    function get(string memory key, string memory sig) public /*returns (string memory)*/ {
        if (compareStrings(kv[key], "")) {
            emit keyValueEvent("keyValueEx/get/doesntexist", sig);
            //return "";
        } else {
            emit keyValueEvent("keyValueEx/get", sig);
            //return kv[key];
        }
    }

    function set(string memory key, string memory value, string memory sig) public {
        if (!compareStrings(kv[key], "")) {
            emit keyValueEvent("keyValueEx/set/exist", sig);
        } else {
            kv[key] = value;
            emit keyValueEvent("keyValueEx/set", sig);
        }
    }

    function compareStrings(string memory a, string memory b) public pure returns (bool) {
        return (keccak256(abi.encodePacked((a))) == keccak256(abi.encodePacked((b))));
    }

}

// 608060405234801561001057600080fd5b50610cf5806100206000396000f3fe608060405234801561001057600080fd5b506004361061005e576000357c0100000000000000000000000000000000000000000000000000000000900480633e10510b14610063578063bed34bba146101b5578063da465d741461031f575b600080fd5b6101b36004803603604081101561007957600080fd5b810190808035906020019064010000000081111561009657600080fd5b8201836020820111156100a857600080fd5b803590602001918460018302840111640100000000831117156100ca57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561012d57600080fd5b82018360208201111561013f57600080fd5b8035906020019184600183028401116401000000008311171561016157600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610508565b005b610305600480360360408110156101cb57600080fd5b81019080803590602001906401000000008111156101e857600080fd5b8201836020820111156101fa57600080fd5b8035906020019184600183028401116401000000008311171561021c57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561027f57600080fd5b82018360208201111561029157600080fd5b803590602001918460018302840111640100000000831117156102b357600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506107db565b604051808215151515815260200191505060405180910390f35b6105066004803603606081101561033557600080fd5b810190808035906020019064010000000081111561035257600080fd5b82018360208201111561036457600080fd5b8035906020019184600183028401116401000000008311171561038657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290803590602001906401000000008111156103e957600080fd5b8201836020820111156103fb57600080fd5b8035906020019184600183028401116401000000008311171561041d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561048057600080fd5b82018360208201111561049257600080fd5b803590602001918460018302840111640100000000831117156104b457600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506108ca565b005b6106226000836040518082805190602001908083835b60208310610541578051825260208201915060208101905060208303925061051e565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106085780601f106105dd57610100808354040283529160200191610608565b820191906000526020600020905b8154815290600101906020018083116105eb57829003601f168201915b5050505050604051806020016040528060008152506107db565b15610701577ffb432178ab7d666cc80589652924a9e60515e498fc17d84daa0962f129478301816040518080602001806020018381038352601a8152602001807f6b657956616c756545782f6765742f646f65736e746578697374000000000000815250602001838103825284818151815260200191508051906020019080838360005b838110156106c15780820151818401526020810190506106a6565b50505050905090810190601f1680156106ee5780820380516001836020036101000a031916815260200191505b50935050505060405180910390a16107d7565b7ffb432178ab7d666cc80589652924a9e60515e498fc17d84daa0962f129478301816040518080602001806020018381038352600e8152602001807f6b657956616c756545782f676574000000000000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b8381101561079b578082015181840152602081019050610780565b50505050905090810190601f1680156107c85780820380516001836020036101000a031916815260200191505b50935050505060405180910390a15b5050565b6000816040516020018082805190602001908083835b6020831061081457805182526020820191506020810190506020830392506107f1565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405160208183030381529060405280519060200120836040516020018082805190602001908083835b602083106108865780518252602082019150602081019050602083039250610863565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040528051906020012014905092915050565b6109e46000846040518082805190602001908083835b6020831061090357805182526020820191506020810190506020830392506108e0565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109ca5780601f1061099f576101008083540402835291602001916109ca565b820191906000526020600020905b8154815290600101906020018083116109ad57829003601f168201915b5050505050604051806020016040528060008152506107db565b610ac2577ffb432178ab7d666cc80589652924a9e60515e498fc17d84daa0962f12947830181604051808060200180602001838103835260148152602001807f6b657956616c756545782f7365742f6578697374000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b83811015610a82578082015181840152602081019050610a67565b50505050905090810190601f168015610aaf5780820380516001836020036101000a031916815260200191505b50935050505060405180910390a1610c16565b816000846040518082805190602001908083835b60208310610af95780518252602082019150602081019050602083039250610ad6565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209080519060200190610b3f929190610c1b565b507ffb432178ab7d666cc80589652924a9e60515e498fc17d84daa0962f129478301816040518080602001806020018381038352600e8152602001807f6b657956616c756545782f736574000000000000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b83811015610bda578082015181840152602081019050610bbf565b50505050905090810190601f168015610c075780820380516001836020036101000a031916815260200191505b50935050505060405180910390a15b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610c5c57805160ff1916838001178555610c8a565b82800160010185558215610c8a579182015b82811115610c89578251825591602001919060010190610c6e565b5b509050610c979190610c9b565b5090565b610cbd91905b80821115610cb9576000816000905550600101610ca1565b5090565b9056fea265627a7a7231582083ccc411e9ab48c2aca8a5821c4f5be0d16b8b7d26e94ec68ec70592a6f6991464736f6c634300050c0032

// [{"anonymous":false,"name":"keyValueEvent","inputs":[{"indexed":false,"name":"eventType","type":"string","internalType":"string"},{"indexed":false,"name":"signature","type":"string","internalType":"string"}],"type":"event","payable":false},{"constant":true,"name":"compareStrings","inputs":[{"name":"a","type":"string","internalType":"string"},{"name":"b","type":"string","internalType":"string"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"type":"function","payable":false,"stateMutability":"pure"},{"constant":false,"name":"get","inputs":[{"name":"key","type":"string","internalType":"string"},{"name":"sig","type":"string","internalType":"string"}],"outputs":[],"type":"function","payable":false,"stateMutability":"nonpayable"},{"constant":false,"name":"set","inputs":[{"name":"key","type":"string","internalType":"string"},{"name":"value","type":"string","internalType":"string"},{"name":"sig","type":"string","internalType":"string"}],"outputs":[],"type":"function","payable":false,"stateMutability":"nonpayable"}]