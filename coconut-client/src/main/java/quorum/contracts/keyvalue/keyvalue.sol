contract keyvalue {

    event keyValueEvent(string eventType, string signature);

    mapping(string => string) kv;

    function get(string memory key, string memory sig) public /*returns (string memory)*/ {
        //kv[key];
        //emit keyValueEvent("keyValue/get", sig);
        //return kv[key];

        if (compareStrings(kv[key], "")) {
            //return "";
        } else {
            emit keyValueEvent("keyValue/get", sig);
            //return kv[key];
        }

    }

    function set(string memory key, string memory value, string memory sig) public {
        kv[key] = value;
        emit keyValueEvent("keyValue/set", sig);
    }

    function compareStrings(string memory a, string memory b) public pure returns (bool) {
        return (keccak256(abi.encodePacked((a))) == keccak256(abi.encodePacked((b))));
    }

}

// 608060405234801561001057600080fd5b50610a27806100206000396000f3fe608060405234801561001057600080fd5b506004361061005e576000357c0100000000000000000000000000000000000000000000000000000000900480633e10510b14610063578063bed34bba146101b5578063da465d741461031f575b600080fd5b6101b36004803603604081101561007957600080fd5b810190808035906020019064010000000081111561009657600080fd5b8201836020820111156100a857600080fd5b803590602001918460018302840111640100000000831117156100ca57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561012d57600080fd5b82018360208201111561013f57600080fd5b8035906020019184600183028401116401000000008311171561016157600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610508565b005b610305600480360360408110156101cb57600080fd5b81019080803590602001906401000000008111156101e857600080fd5b8201836020820111156101fa57600080fd5b8035906020019184600183028401116401000000008311171561021c57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561027f57600080fd5b82018360208201111561029157600080fd5b803590602001918460018302840111640100000000831117156102b357600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610706565b604051808215151515815260200191505060405180910390f35b6105066004803603606081101561033557600080fd5b810190808035906020019064010000000081111561035257600080fd5b82018360208201111561036457600080fd5b8035906020019184600183028401116401000000008311171561038657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290803590602001906401000000008111156103e957600080fd5b8201836020820111156103fb57600080fd5b8035906020019184600183028401116401000000008311171561041d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561048057600080fd5b82018360208201111561049257600080fd5b803590602001918460018302840111640100000000831117156104b457600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506107f5565b005b6106226000836040518082805190602001908083835b60208310610541578051825260208201915060208101905060208303925061051e565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106085780601f106105dd57610100808354040283529160200191610608565b820191906000526020600020905b8154815290600101906020018083116105eb57829003601f168201915b505050505060405180602001604052806000815250610706565b1561062c57610702565b7ffb432178ab7d666cc80589652924a9e60515e498fc17d84daa0962f129478301816040518080602001806020018381038352600c8152602001807f6b657956616c75652f6765740000000000000000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b838110156106c65780820151818401526020810190506106ab565b50505050905090810190601f1680156106f35780820380516001836020036101000a031916815260200191505b50935050505060405180910390a15b5050565b6000816040516020018082805190602001908083835b6020831061073f578051825260208201915060208101905060208303925061071c565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405160208183030381529060405280519060200120836040516020018082805190602001908083835b602083106107b1578051825260208201915060208101905060208303925061078e565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040528051906020012014905092915050565b816000846040518082805190602001908083835b6020831061082c5780518252602082019150602081019050602083039250610809565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020908051906020019061087292919061094d565b507ffb432178ab7d666cc80589652924a9e60515e498fc17d84daa0962f129478301816040518080602001806020018381038352600c8152602001807f6b657956616c75652f7365740000000000000000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b8381101561090d5780820151818401526020810190506108f2565b50505050905090810190601f16801561093a5780820380516001836020036101000a031916815260200191505b50935050505060405180910390a1505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061098e57805160ff19168380011785556109bc565b828001600101855582156109bc579182015b828111156109bb5782518255916020019190600101906109a0565b5b5090506109c991906109cd565b5090565b6109ef91905b808211156109eb5760008160009055506001016109d3565b5090565b9056fea265627a7a72315820bb33968841726d46176cec1a4a697f981c29addd8d9566da106d202dcdd7e80964736f6c634300050c0032

// [{"anonymous":false,"name":"keyValueEvent","inputs":[{"indexed":false,"name":"eventType","type":"string","internalType":"string"},{"indexed":false,"name":"signature","type":"string","internalType":"string"}],"type":"event","payable":false},{"constant":true,"name":"compareStrings","inputs":[{"name":"a","type":"string","internalType":"string"},{"name":"b","type":"string","internalType":"string"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"type":"function","payable":false,"stateMutability":"pure"},{"constant":false,"name":"get","inputs":[{"name":"key","type":"string","internalType":"string"},{"name":"sig","type":"string","internalType":"string"}],"outputs":[],"type":"function","payable":false,"stateMutability":"nonpayable"},{"constant":false,"name":"set","inputs":[{"name":"key","type":"string","internalType":"string"},{"name":"value","type":"string","internalType":"string"},{"name":"sig","type":"string","internalType":"string"}],"outputs":[],"type":"function","payable":false,"stateMutability":"nonpayable"}]
